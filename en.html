<html>
<head>
    <title>Snowsant Calculator</title>
    <style>
        body {
            padding-top: 10px;
            padding-left: 10px;
            padding-right: 10px;
            /* color: #FFF; */
            /* text-shadow: -2px -2px #000, -2px -1px #000, -2px 0 #000, -2px 1px #000, -2px 2px #000, -1px -2px #000, -1px -1px #000, -1px 0 #000, -1px 1px #000, -1px 2px #000, 0 -2px #000, 0 -1px #000, 0 0 #000, 0 1px #000, 0 2px #000, 1px -2px #000, 1px -1px #000, 1px 0 #000, 1px 1px #000, 1px 2px #000, 2px -2px #000, 2px -1px #000, 2px 0 #000, 2px 1px #000, 2px 2px #000; */
            text-align: center;
        }

        #div_overlay_container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 3044248;
            background-color: #000000EE;
        }

        .div_container {
            margin-top: 20px;
            margin-left: 20px;
            margin-right: 20px;
        }

        a:link, a:visited {
            color: #ffce77;
            text-decoration: none;
        }

        textarea {
            width: 100%;
            resize: none;
        }

        table {
            border-collapse: collapse;
        }

        .table_header {
            width: 100%;
            text-align: left;
            font-size: 1.5em;
            table-layout: fixed;
        }

        .table_header th {
            font-size: 1.6em;
        }

        .table_text {
            width: 100%;
            text-align: left;
            table-layout: fixed;
        }

        .table_text tr {
            height: 75px;
        }

        .table_text th {
            font-size: 2em;
            padding: 10px;
        }

        .table_text td {
            height: 20px;
            /* width: 50%; */
            font-size: 1.5em;
            padding: 0px 5px;
        }

        .table_text input, .table_text select {
            width: 80%;
        }

        .table_text input, .table_text select {
            font-size: 1.25em;
        }

        #table_settings, #table_main_3 {
            background-color: #dddddd;
        }

        #L8 {
            font-size: 2em;
        }

        #L8 span {
            color: #ffce77;
        }

        #L8 span b, td[id^="td_notice"] span {
            color: #ff7777;
            margin: 0px 5px;
        }

        #table_cost {
            color: #FFF;
        }

        #tr_warning {
            color: red;
        }

        td[id^="td_wish"], td[id^="td_cost"] {
            border-width: 1px;
            border-color: #AAAAAA;
            border-top-style: solid;
            border-bottom-style: solid;
            border-left-style: dashed;
            border-right-style: dashed;
            padding-left: 10px;
            padding-right: 10px;
        }

        #td_cost_result {
            border-width: 0px;
        }

        td[id^="td_cost"] span{
            color: #ffce77;
            margin-left: 5px;
            margin-right: 5px;
        }

        .tr_border_bottom {
            border-bottom: 1px solid #000;
        }

        .td_border_right {
            border-right: 1px solid #000;
        }

        td[class="td_cost_not_paid"] {
            background-color: #fedcba;
        }

        #div_wish_options {
            position:absolute;
            margin-top: 15px;
        }

        .div_button {
            background-color: #F0F0F07F;
            padding: 10px;
            margin: 10px;
            border-radius: 3px;
            border-color: #000;
            border-style: solid;
            border-width: 1px;
            text-align: center;
        }

        .wish_option {
            background-color: #DDDDDD7F;
            height: 32px;
            padding: 3px 10px;
            margin-top: 2px;
            border-radius: 3px;
            border-style: solid;
            border-width: 1px;
            border-color: #000;
        }

        .div_button:hover, .wish_option:hover {
            background-color: #ffeee2;
        }

        #tr_notice, .current_step {
            background-color: #ffbf92;
        }

        #td_notice {
            width: 80%;
            padding-left: 10px;
        }

        #td_notice_button {
            width: 20%;
            padding-right: 10px;
            text-align: right;
        }

        .div_notice_button {
            width: 50px;
            display: inline-block;
            background-color: #F0F0F07F;
            padding: 10px;
            border-radius: 3px;
            border-color: #000;
            border-style: solid;
            border-width: 1px;
            text-align: center;
        }

        .div_tag_button, .div_settings_button {
            width: 150px;
            display: inline-block;
            background-color: #F0F0F07F;
            padding: 10px;
            border-radius: 3px;
            border-color: #000;
            border-style: solid;
            border-width: 1px;
            text-align: center;
        }

        .div_tag_button:hover {
            outline-color: #00AAFF;
            outline-style: solid;
            outline-width: 3px;
        }

        .aite_A {
            color: #8dd3f6;
        }

        .aite_B {
            color: #aee1bb;
        }

        .text_center {
            text-align: center;
        }

        .div_tag_button_enabled {
            background-color: #00AAFF;
        }

        .div_tag_button_enabled_useless {
            background-color: #bb5a5a;
        }

        .div_tag_button_disabled {
            background-color: #ebeb16;
        }

        .div_tag_button_disabled_useless {
            background-color: #76cb8b;
        }

        #td_md5 {
            text-align: center;
            opacity: 0;
        }

        #td_md5:hover {
            opacity: 1;
            background-color: #2B666666;
        }

        #span_subtitle {
            font-size: 0.5em;
            color: #2226;
            user-select: none;
        }
    </style>
    <script src="./calc.js"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QGM58QCD7C"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-QGM58QCD7C');
    </script>
</head>

<body>
    <table class="table_header">
        <tr>
            <th colspan="3">
                <div id="div_title" class="elm_outline elm_white">
                    <span id="span_title">Snowsant Calculator</span>
                    <span id="span_subtitle">Snowsant's Shop Final Strategy</span>
                </div>
            </th>
            <td>
                <div class="div_button" id="div_settings" onclick="handle_button_settings();">Settings</div>
            </td>
            <td>
                <div class="div_button" onclick="location.reload();">Clear(Refresh)</div>
            </td>
        </tr>
    </table>
    <table class="table_text" id="table_settings" style="display: none;">
        <tr class="tr_border_bottom">
            <th>Settings</td>
        </tr>
        <tr class="tr_border_bottom">
            <td>Language</td>
            <td colspan="4">
                English / <a href="./index.html" target="_self">中文</a> / <a href="./ja.html" target="_self">日本語</a>
            </td>
        </tr>
        <tr>
            <td rowspan="2">Products set</td>
            <td>
                <div class="div_button" onclick="handle_product_set(0);">Set 1（DAY 1~）</div>
            </td>
            <td>
                <div class="div_button" onclick="handle_product_set(1);">Set 2（DAY 4~ and clear SL-5）</div>
            </td>
        </tr>
        <tr>
            <td>
                <div class="div_button" onclick="handle_product_set(2);">Set 3（DAY 9~ and clear SL-EX-1）</div>
            </td>
            <td>
                <div class="div_button" onclick="handle_product_set(3);">Set 4（DAY 12~ and clear SL-EX-5）</div>
            </td>
        </tr>
        <tr>
            <td colspan="5">The current products set is set <span id="products_set_id_0">1</span>. The below values will auto switch as the products set switchs.</td>
        </tr>
        <tr>
            <td>Drink pricing range</td>
            <td><input type="number" id="drink_fw_0" min="0" value="45" disabled></td>
            <td><input type="number" id="drink_fw_1" min="0" value="55" disabled></td>
        </tr>
        <tr>
            <td>Food pricing range</td>
            <td><input type="number" id="food_fw_0" min="0" value="35" disabled></td>
            <td><input type="number" id="food_fw_1" min="0" value="45" disabled></td>
        </tr>
        <tr>
            <td>Gift pricing range</td>
            <td><input type="number" id="toy_fw_0" min="0" value="950" disabled></td>
            <td><input type="number" id="toy_fw_1" min="0" value="1050" disabled></td>
        </tr>
        <tr class="tr_border_bottom">
            <td class="">Sales ranking reward</td>
            <td class=""><input type="number" id="bonus_1" min="0" value="5000" disabled></td>
            <td class=""><input type="number" id="bonus_2" min="0" value="2000" disabled></td>
            <td class=""><input type="number" id="bonus_3" min="0" value="1000" disabled></td>
        </tr>
    </table>
    <table class="table_text">
        <tr>
            <td colspan="4" id="td_notice_0" class="">
                <a href="https://www.bilibili.com/video/BV1444y1w7eJ/" target="_blank">垄断倾销，不再奏效！雪雉小店策略下篇，和计算器正式版！</a> The origin video about the principle!<br>
                <br>
                <a href="https://www.bilibili.com/video/BV1F44y1A7mz/" target="_blank">囤积居奇，垄断牟利！雪雉的小店商战课程</a> Another video about hoarding and dumping of Gifts<br>
            </td>
            <td colspan="1">
                <p>Author:<a href="https://space.bilibili.com/246187036" target="_blank">他的十天Histensky</a></p>
            </td>
        </tr>
        <tr>
            <td colspan="4" id="td_notice_1" class="">
                Pay attention to the rivals' <span>icon</span> and do not confuse them. <br>
                If you find that entered or clicked wrongly anytime, please click<span>Refresh</span>↗.<br>
            </td>
            <td colspan="1">
                <p>Transplant：<a href="https://space.bilibili.com/533170" target="_blank">羽波</a></p>
            </td>
        </tr>
        <tr>
            <td colspan="4" id="td_notice_2" class="">
                The current step will be <span class="current_step" style="color: #000;">background color highlighted</span>. Maybe <a href="https://youtube.com/playlist?list=PLU1PH6-afM0H4hmwhJAOt78AD2SkFRwuT&si=wOZmlS0_CcxE9VeA" target="_blank">this demo video playlist</a> or the Manual→ could help you.<br>
                You can raise a <a href="https://github.com/SonodaHanami/snowsant_calculator/issues" target="_blank">Github issue</a> if you find any bug.<br>
            </td>
            <td colspan="1" class="">
                <a href="./help.html" target="_blank">Manual</a>
            </td>
        </tr>
        <tr>
            <td colspan="5" id="td_notice_3" class="">
                <span id="event_day"></span>The current products set is set <span id="products_set_id_1">1</span>. You can switch it manually in<span>Settings</span>.
            </td>
        </tr>
    </table>
    <table class="table_text" id="table_main_0">
        <tr class="tr_border_bottom">
            <th class="td_border_right aite_A text_center">Buying phase</th>
            <th id="th_2" colspan="4" class="text_center">
                Buying strategy
            </th>
        </tr>
        <tr>
            <td class="td_border_right"></td>
            <td id="td_0_1">Total</td>
            <td id="td_0_2">Snowsant</td>
            <td id="td_0_3" class="aite_A">Rival A(clock icon)</td>
            <td id="td_0_4" class="">Rival B</td>
        </tr>
        <tr>
            <th class="td_border_right tr_border_bottom">Drink</th>
            <td id="td_1_1"><input type="number" id="drink_total" min="0" value="0" step="90"><br>　</td>
            <td id="td_1_2">
                <select name="drink_strat_0" id="drink_strat_0">
                    <option value="-1"></option>
                    <option value="0">Conservative</option>
                    <option value="1">Steady</option>
                    <option value="2">Radical</option>
                </select>
                <br>
                <span id="drink_stock_0">?</span>
            </td>
            <td id="td_1_3">
                <select name="drink_strat_1" id="drink_strat_1">
                    <option value="-1">Unknown</option>
                    <option value="0">Conservative</option>
                    <option value="1">Steady</option>
                    <option value="2">Radical</option>
                </select>
                <br>
                <span id="drink_stock_1">?</span>
            </td>
            <td id="td_1_4" class="">
                <select name="drink_strat_2" id="drink_strat_2">
                    <option value="-1">Unknown</option>
                    <option value="0">Conservative</option>
                    <option value="1">Steady</option>
                    <option value="2">Radical</option>
                </select>
                <br>
                <span id="drink_stock_2">?</span>
            </td>
        </tr>
        <tr>
            <th class="td_border_right tr_border_bottom">Food</th>
            <td id="td_2_1"><input type="number" id="food_total" min="0" value="0" step="90"><br>　</td>
            <td id="td_2_2">
                <select name="food_strat_0" id="food_strat_0">
                    <option value="-1"></option>
                    <option value="0">Conservative</option>
                    <option value="1">Steady</option>
                    <option value="2">Radical</option>
                </select>
                <br>
                <span id="food_stock_0">?</span>
            </td>
            <td id="td_2_3">
                <select name="food_strat_1" id="food_strat_1">
                    <option value="-1">Unknown</option>
                    <option value="0">Conservative</option>
                    <option value="1">Steady</option>
                    <option value="2">Radical</option>
                </select>
                <br>
                <span id="food_stock_1">?</span>
            </td>
            <td id="td_2_4" class="">
                <select name="food_strat_2" id="food_strat_2">
                    <option value="-1">Unknown</option>
                    <option value="0">Conservative</option>
                    <option value="1">Steady</option>
                    <option value="2">Radical</option>
                </select>
                <br>
                <span id="food_stock_2">?</span>
            </td>
        </tr>
        <tr class="tr_border_bottom">
            <th class="td_border_right">Gift</th>
            <td id="td_3_1"><input type="number" id="toy_total" min="0" value="0" step="10"><br>　</td>
            <td id="td_3_2">
                <select name="toy_strat_0" id="toy_strat_0">
                    <option value="-1"></option>
                    <option value="0">Conservative</option>
                    <option value="1">Steady</option>
                    <option value="2">Radical</option>
                </select>
                <br>
                <span id="toy_stock_0">?</span>
            </td>
            <td id="td_3_3">
                <select name="toy_strat_1" id="toy_strat_1">
                    <option value="-1">Unknown</option>
                    <option value="0">Conservative</option>
                    <option value="1">Steady</option>
                    <option value="2">Radical</option>
                </select>
                <br>
                <span id="toy_stock_1">?</span>
            </td>
            <td id="td_3_4" class=""></td>
        </tr>
    </table>
    <table class="table_text" id="table_main_1" style="display: none;">
        <tr class="tr_border_bottom">
            <th class="td_border_right aite_B text_center">Selling phase</th>
            <th id="th_5" colspan="2" class="td_border_right text_center">
                Inquire about sales pricing
            </th>
            <th id="th_7" colspan="2" class="">
                Recommended pricing and estimated revenue
            </th>
        </tr>
        <tr>
            <td class="td_border_right"></td>
            <td id="td_0_5" class="aite_A">Rival A(clock icon)</td>
            <td id="td_0_6" class="td_border_right">Rival B</td>
        </tr>
        <tr>
            <th class="td_border_right tr_border_bottom">Drink</th>
            <td id="td_1_5"><input type="number" id="drink_dt_0" min="0" value="0"></td>
            <td id="td_1_6" class="td_border_right"><input type="number" id="drink_dt_1" min="0" value="0"></td>
            <td colspan="2" id="td_1_7"></td>
        </tr>
        <tr>
            <th class="td_border_right tr_border_bottom">Food</th>
            <td id="td_2_5"><input type="number" id="food_dt_0" min="0" value="0"></td>
            <td id="td_2_6" class="td_border_right"><input type="number" id="food_dt_1" min="0" value="0"></td>
            <td id="td_2_7" colspan="2" id="td_2_7"></td>
        </tr>
        <tr class="tr_border_bottom">
            <th class="td_border_right">Gift</th>
            <td id="td_3_5"><input type="number" id="toy_dt_0" min="0" value="0"></td>
            <td id="td_3_6" class="td_border_right"></td>
            <td id="td_3_7" colspan="2" id="td_3_7"></td>
        </tr>
    </table>
    <table class="table_text" id="table_main_2">
        <tr class="tr_border_bottom">
            <th class="td_border_right" style="font-size: 2em; font-weight: bold;">Remaining scouting chances</th>
            <td id="td_4_1" colspan="1" class=""><input type="number" id="detect" min="0" value="6"  style="font-size: 2em; font-weight: bold;"></td>
            <td id="td_4_2"></td>
            <td id="td_4_3" colspan="2" rowspan="1">
                <div class="div_button" onclick="first_phase_greedy();">Get Buying Strategy</div>
            </td>
        </tr>
        <tr class="tr_border_bottom">
            <td colspan="5" id="L8">
                Please fill in the total quantity of products and the remaining scouting chances, and then click "Get Buying Strategy"<br>
                <!-- <span><b>2023/08/21 总之提醒一下今天是活动最后一天，请根据纪念品库存自行判断是否需要保守进货清仓大甩卖</b></span> -->
            </td>
        </tr>
    </table>
    <table class="table_text" id="table_main_3">
    </table>

    <script>
        // 页面加载完成时执行
        // 高亮
        document.getElementById(`td_1_1`).classList.add('current_step');
        document.getElementById(`td_2_1`).classList.add('current_step');
        document.getElementById(`td_3_1`).classList.add('current_step');
        document.getElementById(`td_4_1`).classList.add('current_step');
        document.getElementById(`td_4_3`).classList.add('current_step');
        // 自动更新设置
        update_settings();

        console.log('OK');
    </script>
</body>
</html>